# ðŸ”— Webhook è‡ªåŠ¨åŒæ­¥ä½¿ç”¨æŒ‡å—

## ðŸ“– åŠŸèƒ½æ¦‚è¿°

Webhook è‡ªåŠ¨åŒæ­¥åŠŸèƒ½å…è®¸ä½ åœ¨ Gitee ä»“åº“å‘ç”ŸæŽ¨é€æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°åšå®¢å†…å®¹ã€‚å½“ä½ å‘ posts ä»“åº“æäº¤æ–°æ–‡ç« æˆ–ä¿®æ”¹çŽ°æœ‰æ–‡ç« æ—¶ï¼Œåšå®¢ä¼šè‡ªåŠ¨æ‹‰å–æœ€æ–°å†…å®¹å¹¶åˆ·æ–°ç¼“å­˜ã€‚

## ðŸš€ å¿«é€Ÿå¼€å§‹

### 1. é…ç½® Gitee Webhook

1. ç™»å½• Giteeï¼Œè¿›å…¥ä½ çš„ posts ä»“åº“
2. ç‚¹å‡» **ç®¡ç†** â†’ **WebHooks**
3. ç‚¹å‡» **æ·»åŠ  WebHook**
4. å¡«å†™ä»¥ä¸‹é…ç½®ï¼š

```
URL: https://broqiang.com/webhook/gitee
å¯†ç : c85b7544d37c89280afcf912ec70f4083b18065d9e89966cae6059798f0dadf5
è§¦å‘äº‹ä»¶: âœ… Push
åˆ†æ”¯è¿‡æ»¤: main
```

5. ç‚¹å‡» **æ·»åŠ ** å®Œæˆé…ç½®

### 2. æµ‹è¯• Webhook

ä½¿ç”¨å†…ç½®çš„æµ‹è¯•å·¥å…·éªŒè¯é…ç½®ï¼š

```bash
# æµ‹è¯•æœ¬åœ°å¼€å‘çŽ¯å¢ƒ
make webhook-test-local

# æµ‹è¯•ç”Ÿäº§çŽ¯å¢ƒ
make webhook-test-remote
```

### 3. ç›‘æŽ§åŒæ­¥çŠ¶æ€

```bash
# æŸ¥çœ‹æœåŠ¡å¥åº·çŠ¶æ€
curl https://broqiang.com/health

# æŸ¥çœ‹ Webhook æ—¥å¿—
tail -f /bro/mdblog/logs/mdblog.log | grep -i webhook
```

## ðŸ”§ å·¥ä½œåŽŸç†

### åŒæ­¥æµç¨‹

1. **è§¦å‘**: å‘ posts ä»“åº“ main åˆ†æ”¯æŽ¨é€ä»£ç 
2. **éªŒè¯**: Gitee å‘é€å¸¦ç­¾åçš„ Webhook è¯·æ±‚
3. **ç­¾åéªŒè¯**: æœåŠ¡å™¨éªŒè¯è¯·æ±‚çš„åˆæ³•æ€§
4. **Git Pull**: æ‰§è¡Œ `git pull origin main` æ›´æ–°ä»£ç 
5. **æ•°æ®é‡è½½**: æ¸…ç©ºç¼“å­˜ï¼Œé‡æ–°è§£æžæ‰€æœ‰ Markdown æ–‡ä»¶
6. **å“åº”**: è¿”å›žåŒæ­¥ç»“æžœå’Œç»Ÿè®¡ä¿¡æ¯

### å®‰å…¨æœºåˆ¶

- **HMAC-SHA256 ç­¾å**: é˜²æ­¢æ¶æ„è¯·æ±‚
- **åˆ†æ”¯è¿‡æ»¤**: åªå¤„ç† main åˆ†æ”¯çš„æŽ¨é€
- **è¯·æ±‚éªŒè¯**: éªŒè¯æ–¹æ³•ã€å¤´éƒ¨å’Œè½½è·æ ¼å¼
- **é”™è¯¯å¤„ç†**: å…¨é¢çš„å¼‚å¸¸æ•èŽ·å’Œæ—¥å¿—è®°å½•

## ðŸ“ ä½¿ç”¨ç¤ºä¾‹

### æ·»åŠ æ–°æ–‡ç« 

1. åœ¨æœ¬åœ° posts ä»“åº“åˆ›å»ºæ–°æ–‡ç« ï¼š

```bash
cd posts
mkdir -p go
cat > go/new-article.md << 'EOF'
---
title: "æˆ‘çš„æ–°æ–‡ç« "
author: "BroQiang"
created_at: 2024-01-15T10:00:00
tags: ["Go", "æŠ€æœ¯"]
---

# æ–‡ç« å†…å®¹

è¿™æ˜¯ä¸€ç¯‡æ–°æ–‡ç« çš„å†…å®¹...
EOF
```

2. æäº¤å¹¶æŽ¨é€ï¼š

```bash
git add .
git commit -m "æ·»åŠ æ–°æ–‡ç« : æˆ‘çš„æ–°æ–‡ç« "
git push origin main
```

3. ç­‰å¾…å‡ ç§’é’Ÿï¼Œè®¿é—®åšå®¢æŸ¥çœ‹æ›´æ–°

### ä¿®æ”¹çŽ°æœ‰æ–‡ç« 

1. ç¼–è¾‘æ–‡ç« æ–‡ä»¶
2. æäº¤å¹¶æŽ¨é€æ›´æ”¹
3. Webhook è‡ªåŠ¨è§¦å‘ï¼Œæ–‡ç« ç«‹å³æ›´æ–°

## ðŸ› æ•…éšœæŽ’æŸ¥

### Webhook æœªè§¦å‘

1. **æ£€æŸ¥ Gitee é…ç½®**:

   ```bash
   # ç¡®è®¤ URL æ­£ç¡®
   curl https://broqiang.com/health
   ```

2. **æ£€æŸ¥åˆ†æ”¯**:

   ```bash
   # ç¡®ä¿æŽ¨é€åˆ° main åˆ†æ”¯
   git branch
   git push origin main
   ```

3. **æŸ¥çœ‹ Gitee Webhook æ—¥å¿—**:
   - åœ¨ Gitee ä»“åº“çš„ WebHook é¡µé¢æŸ¥çœ‹å‘é€æ—¥å¿—
   - æ£€æŸ¥è¿”å›žçŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯

### åŒæ­¥å¤±è´¥

1. **æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—**:

   ```bash
   tail -n 50 /bro/mdblog/logs/mdblog.log
   ```

2. **æ£€æŸ¥ Git ä»“åº“çŠ¶æ€**:

   ```bash
   cd ../posts
   git status
   git remote -v
   ```

3. **æ‰‹åŠ¨æµ‹è¯•**:

   ```bash
   # æµ‹è¯• Git æ“ä½œ
   cd ../posts
   git pull origin main

   # æµ‹è¯• Webhook
   make webhook-test-remote
   ```

### å¸¸è§é”™è¯¯

| é”™è¯¯ä¿¡æ¯           | åŽŸå›                | è§£å†³æ–¹æ¡ˆ                |
| ------------------ | ------------------ | ----------------------- |
| `ç­¾åéªŒè¯å¤±è´¥`     | Webhook å¯†é’¥ä¸åŒ¹é… | æ£€æŸ¥ Gitee é…ç½®ä¸­çš„å¯†é’¥ |
| `git pull å¤±è´¥`    | Git ä»“åº“é—®é¢˜       | æ£€æŸ¥ä»“åº“çŠ¶æ€å’Œæƒé™      |
| `posts ç›®å½•ä¸å­˜åœ¨` | è·¯å¾„é…ç½®é”™è¯¯       | ç¡®è®¤ posts ç›®å½•ä½ç½®     |
| `å·²å¿½ç•¥éžç›®æ ‡åˆ†æ”¯` | æŽ¨é€åˆ°éž main åˆ†æ”¯ | æŽ¨é€åˆ° main åˆ†æ”¯        |

## âš™ï¸ é«˜çº§é…ç½®

### ä¿®æ”¹ç›‘å¬åˆ†æ”¯

ç¼–è¾‘ `internal/config/config.go`:

```go
const (
    WebhookBranch = "develop" // æ”¹ä¸ºå…¶ä»–åˆ†æ”¯
)
```

### ä¿®æ”¹ posts ç›®å½•è·¯å¾„

posts ç›®å½•è·¯å¾„é€šè¿‡ä»¥ä¸‹æ–¹å¼ç¡®å®šï¼š

1. **å‘½ä»¤è¡Œå‚æ•°**ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰ï¼š

   ```bash
   ./mdblog -posts /path/to/posts
   ```

2. **é»˜è®¤ä½ç½®**ï¼š
   - æ­£å¸¸ç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼šå¯æ‰§è¡Œæ–‡ä»¶åŒçº§çš„ `posts` ç›®å½•
   - å¼€å‘æ¨¡å¼ï¼ˆ`go run`ï¼‰ï¼šå½“å‰å·¥ä½œç›®å½•ä¸‹çš„ `posts` ç›®å½•

å¦‚æžœéœ€è¦ä¿®æ”¹é»˜è®¤è¡Œä¸ºï¼Œå¯ä»¥ç¼–è¾‘ `main.go` ä¸­çš„è·¯å¾„é€»è¾‘ï¼š

```go
// æ­£å¸¸ç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½¿ç”¨å¯æ‰§è¡Œæ–‡ä»¶åŒçº§ç›®å½•
actualPostsDir = filepath.Join(execDir, "posts")
```

### è‡ªå®šä¹‰ Webhook å¯†é’¥

1. ç”Ÿæˆæ–°å¯†é’¥ï¼š

   ```bash
   openssl rand -hex 32
   ```

2. æ›´æ–°é…ç½®ï¼š

   ```go
   const (
       WebhookSecret = "your-new-secret-key"
   )
   ```

3. æ›´æ–° Gitee Webhook é…ç½®

## ðŸ” ç›‘æŽ§å’Œæ—¥å¿—

### æ—¥å¿—æ ¼å¼

Webhook ç›¸å…³æ—¥å¿—ä½¿ç”¨ä»¥ä¸‹æ ¼å¼ï¼š

```
2024-01-15 10:30:45 [INFO] æ”¶åˆ° Gitee Webhook è¯·æ±‚
2024-01-15 10:30:45 [INFO] å¼€å§‹æ‰§è¡Œ Git Pull...
2024-01-15 10:30:46 [INFO] Git Pull æˆåŠŸ: Already up to date.
2024-01-15 10:30:46 [INFO] å¼€å§‹é‡æ–°åŠ è½½æ•°æ®...
2024-01-15 10:30:46 [INFO] é‡æ–°åŠ è½½æ–‡ç« : æˆ‘çš„æ–°æ–‡ç« 
2024-01-15 10:30:46 [INFO] æ•°æ®é‡æ–°åŠ è½½å®Œæˆï¼Œå…±åŠ è½½ 25 ç¯‡æ–‡ç« 
2024-01-15 10:30:46 [INFO] Webhook å¤„ç†æˆåŠŸå®Œæˆ
```

### æ€§èƒ½ç›‘æŽ§

```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
ps aux | grep mdblog

# æŸ¥çœ‹ç«¯å£çŠ¶æ€
netstat -tlnp | grep 8091

# æŸ¥çœ‹æœ€è¿‘çš„ Webhook è¯·æ±‚
grep "Webhook" /bro/mdblog/logs/mdblog.log | tail -10
```

## ðŸ“Š æœ€ä½³å®žè·µ

### 1. æ–‡ç« ç®¡ç†

- ä½¿ç”¨æœ‰æ„ä¹‰çš„æ–‡ä»¶å
- éµå¾ªåˆ†ç±»ç›®å½•ç»“æž„
- ç¡®ä¿ Front Matter æ ¼å¼æ­£ç¡®
- å®šæœŸæ£€æŸ¥æ–‡ç« çš„ Git çŠ¶æ€

### 2. å®‰å…¨å»ºè®®

- å®šæœŸæ›´æ¢ Webhook å¯†é’¥
- ç›‘æŽ§å¼‚å¸¸çš„åŒæ­¥è¯·æ±‚
- å¤‡ä»½é‡è¦æ–‡ç« å†…å®¹
- ä½¿ç”¨åˆ†æ”¯ä¿æŠ¤ç­–ç•¥

### 3. æ€§èƒ½ä¼˜åŒ–

- é¿å…é¢‘ç¹çš„å°æäº¤
- åˆå¹¶ç›¸å…³æ›´æ”¹ä¸ºå•æ¬¡æäº¤
- ç›‘æŽ§åŒæ­¥æ—¶é—´å’Œèµ„æºä½¿ç”¨
- å®šæœŸæ¸…ç†æ— ç”¨çš„æ–‡ç« æ–‡ä»¶

## ðŸ†˜ æŠ€æœ¯æ”¯æŒ

å¦‚æžœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æŸ¥çœ‹æœ¬æŒ‡å—çš„æ•…éšœæŽ’æŸ¥éƒ¨åˆ†
2. æ£€æŸ¥é¡¹ç›®çš„ GitHub Issues
3. æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
4. ä½¿ç”¨æµ‹è¯•å·¥å…·éªŒè¯é…ç½®

## âš ï¸ é‡è¦è¯´æ˜Žï¼šç­¾åéªŒè¯é—®é¢˜

### å½“å‰çŠ¶æ€

Gitee Webhook çš„ç­¾åéªŒè¯ç®—æ³•ä¸Žæ ‡å‡†çš„ GitHub/GitLab ä¸åŒï¼Œç»è¿‡æµ‹è¯•å‘çŽ°å¤šç§ç­¾åç®—æ³•éƒ½æ— æ³•åŒ¹é…ã€‚

### è§£å†³æ–¹æ¡ˆ

#### æ–¹æ¡ˆä¸€ï¼šå¼€å‘æ¨¡å¼ï¼ˆæŽ¨èç”¨äºŽæµ‹è¯•ï¼‰

åœ¨ `internal/config/config.go` ä¸­è®¾ç½®ï¼š

```go
WebhookDevMode = true  // è·³è¿‡ç­¾åéªŒè¯
```

#### æ–¹æ¡ˆäºŒï¼šç”Ÿäº§çŽ¯å¢ƒè§£å†³æ–¹æ¡ˆ

1. **ç½‘ç»œå®‰å…¨**: ä½¿ç”¨é˜²ç«å¢™æˆ– Nginx é™åˆ¶åªå…è®¸ Gitee æœåŠ¡å™¨ IP è®¿é—®
2. **HTTPS**: ç¡®ä¿ä½¿ç”¨ HTTPS åŠ å¯†ä¼ è¾“
3. **å†…ç½‘éƒ¨ç½²**: å¦‚æžœå¯èƒ½ï¼Œå°† Webhook ç«¯ç‚¹éƒ¨ç½²åœ¨å†…ç½‘

#### æ–¹æ¡ˆä¸‰ï¼šè‡ªå®šä¹‰éªŒè¯

ä½ å¯ä»¥åœ¨ `verifyGiteeSignature` å‡½æ•°ä¸­å®žçŽ°è‡ªå·±çš„éªŒè¯é€»è¾‘ï¼Œæ¯”å¦‚ï¼š

- IP ç™½åå•éªŒè¯
- è¯·æ±‚å¤´éªŒè¯
- æ—¶é—´æˆ³éªŒè¯ï¼ˆé˜²é‡æ”¾æ”»å‡»ï¼‰

### ç”Ÿäº§çŽ¯å¢ƒé…ç½®

ç”Ÿäº§çŽ¯å¢ƒä½¿ç”¨æ—¶ï¼Œè¯·ï¼š

1. **ä¿®æ”¹é…ç½®**ï¼š

```go
// internal/config/config.go
WebhookDevMode = false  // å¯ç”¨ç­¾åéªŒè¯
WebhookSecret = "ä½ çš„å®žé™…å¯†é’¥"  // æ›¿æ¢ä¸ºä½ çš„å¯†é’¥
```

2. **Nginx åå‘ä»£ç†é…ç½®**ï¼š

```nginx
# é™åˆ¶ Gitee IP è®¿é—® webhook
location /webhook/gitee {
    # Gitee æœåŠ¡å™¨ IP æ®µï¼ˆéœ€è¦æŸ¥è¯¢æœ€æ–°çš„ï¼‰
    allow 116.211.167.0/24;
    allow 117.184.188.0/24;
    deny all;

    proxy_pass http://localhost:8091;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
}
```

### è°ƒè¯•ç­¾åéªŒè¯

å¦‚æžœä½ æƒ³è§£å†³ç­¾åéªŒè¯é—®é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹æ—¥å¿—è¾“å‡ºï¼š

```bash
# æŸ¥çœ‹è¯¦ç»†çš„ç­¾åéªŒè¯æ—¥å¿—
tail -f /var/log/your-app.log | grep "ç­¾åéªŒè¯"
```

å½“å‰å®žçŽ°ä¼šå°è¯•å¤šç§ç­¾åç®—æ³•ï¼š

1. ç›´æŽ¥å¯†é’¥æ¯”è¾ƒ
2. `base64(sha256(timestamp + secret + body))`
3. `base64(sha256(secret + timestamp + body))`
4. `base64(sha256(body + timestamp + secret))`
5. `base64(sha256(secret))`

### ä¿®æ”¹ posts ç›®å½•è·¯å¾„

---

**æ›´æ–°æ—¶é—´**: 2024-01-15  
**ç‰ˆæœ¬**: v1.1.0

## âš ï¸ é‡è¦å‘çŽ°ï¼šGitee Token éªŒè¯æœºåˆ¶

ç»è¿‡æ·±å…¥ç ”ç©¶å¤šä¸ªå¼€æºé¡¹ç›®å’Œå®žé™…æµ‹è¯•ï¼Œå‘çŽ°äº† Gitee Webhook çš„å…³é”®ç‰¹ç‚¹ï¼š

### Gitee vs GitHub ç­¾åéªŒè¯å¯¹æ¯”

| å¹³å°       | éªŒè¯æ–¹å¼   | ç®—æ³•        | ä¼ é€’æ–¹å¼                          |
| ---------- | ---------- | ----------- | --------------------------------- |
| **GitHub** | HMAC ç­¾å  | HMAC-SHA256 | `X-Hub-Signature-256: sha256=...` |
| **Gitee**  | æ˜Žæ–‡ Token | æ— åŠ å¯†      | `X-Gitee-Token: åŽŸæ–‡å¯†ç `         |

### å…³é”®å‘çŽ°

1. **Gitee ä¸ä½¿ç”¨ HMAC ç­¾åéªŒè¯**

   - ä¸Ž GitHub çš„ HMAC-SHA256 å®Œå…¨ä¸åŒ
   - Gitee ç›´æŽ¥ä¼ é€’æ˜Žæ–‡ Tokenï¼Œä¸è¿›è¡ŒåŠ å¯†

2. **Token ç”Ÿæˆæ–¹å¼**

   - ç”¨æˆ·åœ¨ Gitee è®¾ç½®çš„"å¯†ç "ä¼šè¢«ç³»ç»Ÿå¤„ç†
   - å®žé™…å‘é€çš„ Token å¯èƒ½ä¸Žç”¨æˆ·è®¾ç½®çš„å¯†ç ä¸åŒ
   - Token ä¼¼ä¹Žæ˜¯ç”± Gitee ç³»ç»Ÿç”Ÿæˆçš„ Base64 ç¼–ç å€¼

3. **å®žé™…è¯·æ±‚ç¤ºä¾‹**
   ```http
   POST /webhook/gitee
   X-Gitee-Token: 2ovtNdnFjPV6yXQynqrzdBR0Rpa4w9cHDvHspg3MFAA=
   X-Gitee-Timestamp: 1751520876267
   Content-Type: application/json
   ```

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šå¼€å‘æ¨¡å¼ï¼ˆæŽ¨èç”¨äºŽæµ‹è¯•ï¼‰

åœ¨ `internal/config/config.go` ä¸­è®¾ç½®ï¼š

```go
WebhookDevMode = true  // è·³è¿‡TokenéªŒè¯
```

**ä¼˜ç‚¹**ï¼šç«‹å³å¯ç”¨ï¼Œé€‚åˆå¼€å‘æµ‹è¯•
**ç¼ºç‚¹**ï¼šæ²¡æœ‰å®‰å…¨éªŒè¯

### æ–¹æ¡ˆ 2ï¼šToken é€‚é…ï¼ˆæŽ¨èç”¨äºŽç”Ÿäº§ï¼‰

1. **èŽ·å–çœŸå®ž Token**ï¼š
   - ä¸´æ—¶å¯ç”¨å¼€å‘æ¨¡å¼
   - è§¦å‘ä¸€æ¬¡ Webhook æŽ¨é€
   - æŸ¥çœ‹æ—¥å¿—ä¸­çš„ `X-Gitee-Token` å€¼
2. **æ›´æ–°é…ç½®**ï¼š
   ```go
   WebhookSecret = "2ovtNdnFjPV6yXQynqrzdBR0Rpa4w9cHDvHspg3MFAA="  // ä½¿ç”¨å®žé™…Token
   WebhookDevMode = false  // å¯ç”¨éªŒè¯
   ```

### æ–¹æ¡ˆ 3ï¼šç”Ÿäº§çŽ¯å¢ƒå®‰å…¨ç­–ç•¥

ç”±äºŽ Gitee çš„ Token éªŒè¯æœºåˆ¶é™åˆ¶ï¼Œå»ºè®®ç”Ÿäº§çŽ¯å¢ƒé‡‡ç”¨å¤šå±‚å®‰å…¨ç­–ç•¥ï¼š

1. **ç½‘ç»œå±‚å®‰å…¨**ï¼š

   - é…ç½® Nginx åå‘ä»£ç†
   - é™åˆ¶è®¿é—®æ¥æº IPï¼ˆGitee æœåŠ¡å™¨ IPï¼‰
   - ä½¿ç”¨ HTTPS åŠ å¯†ä¼ è¾“

2. **åº”ç”¨å±‚å®‰å…¨**ï¼š
   - è®¾ç½®å¤æ‚çš„ Webhook URL è·¯å¾„
   - å¯ç”¨è®¿é—®æ—¥å¿—ç›‘æŽ§
   - è®¾ç½®å¤±è´¥æ¬¡æ•°é™åˆ¶

## é…ç½®æ­¥éª¤

### 1. ç³»ç»Ÿé…ç½®

ç¡®ä¿åœ¨ `internal/config/config.go` ä¸­æœ‰æ­£ç¡®çš„è®¾ç½®ï¼š

```go
// Webhook é…ç½®
WebhookSecret  = "ä½ çš„Token"    // æ ¹æ®ä¸Šè¿°æ–¹æ¡ˆè®¾ç½®
WebhookBranch  = "main"         // ç›‘å¬çš„åˆ†æ”¯
WebhookDevMode = false          // ç”Ÿäº§çŽ¯å¢ƒè®¾ä¸ºfalse
```

### 2. Gitee ä»“åº“é…ç½®

1. è®¿é—®ï¼š`https://gitee.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å/hooks`
2. ç‚¹å‡»"æ·»åŠ  Webhook"
3. å¡«å†™ä¿¡æ¯ï¼š
   - **URL**: `https://broqiang.com/webhook/gitee`
   - **å¯†ç **: ä»»æ„è®¾ç½®ï¼ˆæ³¨æ„åŽç»­éœ€è¦é€‚é…ï¼‰
   - **è¯·æ±‚å†…å®¹ç±»åž‹**: `application/json`
4. é€‰æ‹©è§¦å‘äº‹ä»¶ï¼š**Push**
5. ç‚¹å‡»"æ·»åŠ "

### 3. æµ‹è¯•éªŒè¯

1. **å¯ç”¨å¼€å‘æ¨¡å¼**è¿›è¡Œåˆå§‹æµ‹è¯•
2. **æäº¤ä»£ç **åˆ° main åˆ†æ”¯
3. **æ£€æŸ¥æ—¥å¿—**ï¼š
   ```bash
   tail -f /var/log/mdblog.log
   ```
4. **æŸ¥çœ‹å“åº”**ï¼šåº”è¯¥çœ‹åˆ°"åŒæ­¥æˆåŠŸ"æ¶ˆæ¯

## æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜

1. **ç­¾åéªŒè¯å¤±è´¥**

   ```
   Webhook é”™è¯¯: Token éªŒè¯å¤±è´¥
   ```

   **è§£å†³**ï¼šå¯ç”¨å¼€å‘æ¨¡å¼æˆ–èŽ·å–æ­£ç¡®çš„ Token

2. **Git Pull å¤±è´¥**

   ```
   Git pull å¤±è´¥: exit status 1
   ```

   **è§£å†³**ï¼šæ£€æŸ¥ Git ä»“åº“æƒé™å’Œç½‘ç»œè¿žæŽ¥

3. **æ— å“åº”**
   - æ£€æŸ¥ URL æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€
   - éªŒè¯é˜²ç«å¢™è®¾ç½®

### è°ƒè¯•æ—¥å¿—

æŸ¥çœ‹è¯¦ç»†çš„ Webhook è°ƒè¯•ä¿¡æ¯ï¼š

```bash
# æŸ¥çœ‹å®žæ—¶æ—¥å¿—
tail -f /var/log/mdblog.log | grep -i webhook

# æŸ¥çœ‹Tokenä¿¡æ¯
tail -f /var/log/mdblog.log | grep -i "X-Gitee-Token"
```

## å‚è€ƒèµ„æ–™

- [GitHub Webhook æ–‡æ¡£](https://docs.github.com/zh/webhooks)
- [ç¬¬ä¸‰æ–¹ Gitee Webhook å®žçŽ°](https://github.com/CloudnuY/gitee-webhook-handler)
- [Gitee ä¸Žå…¶ä»–å¹³å°å¯¹æ¯”](https://github.com/notzheng/Tapd-Git-Hooks)

## æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æé†’**ï¼š

1. ç”Ÿäº§çŽ¯å¢ƒå»ºè®®ä½¿ç”¨ HTTPS å’Œ IP ç™½åå•
2. å®šæœŸæ›´æ¢ Webhook å¯†é’¥
3. ç›‘æŽ§å¼‚å¸¸è®¿é—®å’Œå¤±è´¥è¯·æ±‚
4. å¤‡ä»½é‡è¦é…ç½®æ–‡ä»¶
